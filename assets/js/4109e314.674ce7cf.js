"use strict";(self.webpackChunkdendrite_docs=self.webpackChunkdendrite_docs||[]).push([[144],{7172:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>o,frontMatter:()=>r,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"guides/send-events","title":"Send and Log Events","description":"Send structured events over LSL and store them in HDF5 for trial segmentation and analysis.","source":"@site/docs/guides/send-events.md","sourceDirName":"guides","slug":"/guides/send-events","permalink":"/dendrite/docs/guides/send-events","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"send-events","title":"Send and Log Events","sidebar_label":"Send Events"},"sidebar":"tutorialSidebar","previous":{"title":"Neurofeedback Mode","permalink":"/dendrite/docs/guides/neurofeedback-mode"},"next":{"title":"Overview","permalink":"/dendrite/docs/conceptual/"}}');var d=t(4848),i=t(8453);const r={id:"send-events",title:"Send and Log Events",sidebar_label:"Send Events"},l="Send Events",a={},c=[{value:"Event Structure",id:"event-structure",level:2},{value:"Programmatic Event Sending (Python)",id:"programmatic-event-sending-python",level:2},{value:"Event Mapping",id:"event-mapping",level:3},{value:"Basic Usage",id:"basic-usage",level:3},{value:"Other Languages",id:"other-languages",level:2},{value:"Required Fields",id:"required-fields",level:3},{value:"LSL Stream Configuration",id:"lsl-stream-configuration",level:3},{value:"Example: MATLAB",id:"example-matlab",level:3},{value:"Example: C++/Unity",id:"example-cunity",level:3},{value:"Loading Events",id:"loading-events",level:2},{value:"DataFrame Structure",id:"dataframe-structure",level:3},{value:"Example Output",id:"example-output",level:3},{value:"See Also",id:"see-also",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"send-events",children:"Send Events"})}),"\n",(0,d.jsx)(n.p,{children:"Send structured events over LSL and store them in HDF5 for trial segmentation and analysis."}),"\n",(0,d.jsx)(n.h2,{id:"event-structure",children:"Event Structure"}),"\n",(0,d.jsx)(n.p,{children:"Events are JSON-encoded strings over LSL with these fields:"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Field"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"event_id"})}),(0,d.jsx)(n.td,{children:"int"}),(0,d.jsx)(n.td,{children:"Numeric identifier (from event mapping)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"event_type"})}),(0,d.jsx)(n.td,{children:"str"}),(0,d.jsx)(n.td,{children:"Event name string"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"*"})}),(0,d.jsx)(n.td,{children:"any"}),(0,d.jsx)(n.td,{children:"Additional metadata fields"})]})]})]}),"\n",(0,d.jsxs)(n.p,{children:["LSL captures the timestamp automatically when pushed. When saved to HDF5, events gain additional fields: ",(0,d.jsx)(n.code,{children:"timestamp"})," (LSL server time), ",(0,d.jsx)(n.code,{children:"local_timestamp"})," (receive time), and metadata stored in ",(0,d.jsx)(n.code,{children:"extra_vars"}),"."]}),"\n",(0,d.jsx)(n.h2,{id:"programmatic-event-sending-python",children:"Programmatic Event Sending (Python)"}),"\n",(0,d.jsx)(n.h3,{id:"event-mapping",children:"Event Mapping"}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"events"})," parameter maps human-readable event names to numeric IDs:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:"events = {\n    'trial_start': 10,\n    'cue_onset': 20,\n    'response': 30,\n}\n"})}),"\n",(0,d.jsx)(n.h3,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:"from dendrite.data import EventOutlet\n\n# Create outlet with event mapping\noutlet = EventOutlet(\n    stream_name='Events',\n    events={\n        'trial_start': 10,\n        'cue_onset': 20,\n        'cue_offset': 21,\n        'response': 30,\n        'trial_end': 40,\n    },\n)\n\n# Send event by name (with optional metadata)\noutlet.send_event('trial_start', {'trial_number': 1, 'condition': 'left'})\n"})}),"\n",(0,d.jsx)(n.h2,{id:"other-languages",children:"Other Languages"}),"\n",(0,d.jsx)(n.p,{children:"Events are JSON strings over LSL. Any language with LSL bindings can send them."}),"\n",(0,d.jsx)(n.h3,{id:"required-fields",children:"Required Fields"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Field"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"event_id"})}),(0,d.jsx)(n.td,{children:"int"}),(0,d.jsx)(n.td,{children:"Numeric identifier"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"event_type"})}),(0,d.jsx)(n.td,{children:"string"}),(0,d.jsx)(n.td,{children:"Event name"})]})]})]}),"\n",(0,d.jsx)(n.p,{children:"Additional fields are stored as metadata."}),"\n",(0,d.jsx)(n.h3,{id:"lsl-stream-configuration",children:"LSL Stream Configuration"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Property"}),(0,d.jsx)(n.th,{children:"Value"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Type"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"Events"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Channel format"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"string"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Channel count"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"1"})})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"example-matlab",children:"Example: MATLAB"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-matlab",children:"lib = lsl_loadlib();\ninfo = lsl_streaminfo(lib, 'Events', 'Events', 1, 0, 'cf_string', 'events_id');\noutlet = lsl_outlet(info);\n\nevent = struct('event_id', 10, 'event_type', 'trial_start', 'trial_num', 1);\noutlet.push_sample({jsonencode(event)});\n"})}),"\n",(0,d.jsx)(n.h3,{id:"example-cunity",children:"Example: C++/Unity"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-cpp",children:'// Create LSL outlet (type=\'Events\', format=string, channels=1)\nlsl::stream_info info("Events", "Events", 1, LSL_IRREGULAR_RATE, lsl::cf_string);\nlsl::stream_outlet outlet(info);\n\n// Send event as JSON string\nstd::string event = R"({"event_id": 10, "event_type": "trial_start"})";\noutlet.push_sample(&event);\n'})}),"\n",(0,d.jsx)(n.h2,{id:"loading-events",children:"Loading Events"}),"\n",(0,d.jsxs)(n.p,{children:["Use ",(0,d.jsx)(n.code,{children:"load_events()"})," to load stored events as a pandas DataFrame:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:"from dendrite.data.io import load_events\n\ndf = load_events('recording.h5')  # Loads 'Event' dataset as DataFrame\n"})}),"\n",(0,d.jsx)(n.h3,{id:"dataframe-structure",children:"DataFrame Structure"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Column"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"event_id"})}),(0,d.jsx)(n.td,{children:"int32"}),(0,d.jsx)(n.td,{children:"Numeric event identifier"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"event_type"})}),(0,d.jsx)(n.td,{children:"string"}),(0,d.jsx)(n.td,{children:"Event name"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"timestamp"})}),(0,d.jsx)(n.td,{children:"float64"}),(0,d.jsx)(n.td,{children:"LSL server timestamp"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"local_timestamp"})}),(0,d.jsx)(n.td,{children:"float64"}),(0,d.jsx)(n.td,{children:"Local receive timestamp"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"extra_*"})}),(0,d.jsx)(n.td,{children:"varies"}),(0,d.jsxs)(n.td,{children:["Additional fields (prefixed with ",(0,d.jsx)(n.code,{children:"extra_"}),")"]})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"example-output",children:"Example Output"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:">>> df = load_events('recording.h5')\n>>> print(df)\n   event_id   event_type      timestamp  local_timestamp  extra_trial_number extra_condition\n0        10  trial_start  1234567890.12   1234567889.45                    1            left\n1        20   cue_onset   1234567891.23   1234567890.56                  NaN             NaN\n2        30    response   1234567892.34   1234567891.67                    1            left\n3        40   trial_end   1234567893.45   1234567892.78                  NaN             NaN\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Metadata fields sent with ",(0,d.jsx)(n.code,{children:"send_event()"})," become columns prefixed with ",(0,d.jsx)(n.code,{children:"extra_"}),"."]}),"\n",(0,d.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.a,{href:"/dendrite/docs/guides/data-acquisition",children:"Data Acquisition"})," - Recording continuous data with events"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.a,{href:"/dendrite/docs/guides/synchronous-mode",children:"Synchronous Mode"})," - Trial-based processing using events"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.a,{href:"/dendrite/docs/api/generated/dendrite/data/event_outlet",children:"Events API"})," - EventOutlet technical reference"]}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(h,{...e})}):h(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>l});var s=t(6540);const d={},i=s.createContext(d);function r(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);